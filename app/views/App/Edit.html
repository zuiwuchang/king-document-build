{{set . "title" (msg . "chapter.edit.title")}}
{{template "header.html" .}}

<style type="text/css">
.kBtnSpan{
	padding-right: 5px;
	cursor: pointer;
}
.kSectionNode{
	margin-top: 7px;
}
.kEditor{
	width: 100%;
	height: 200px;
	resize: none;
	padding: 5px;
}
.kSectionHide{
	display: none;
}
.kModalMsg{
	display: none;
}
.kSectionViewStatus{
	position:relative;
}
.KKeySidebarView{
	display: none;
	padding: 9px;
	position: absolute;
	border-radius: 6px;
}
.KKeySidebarView a{
	padding-left: 3px;
	padding-right: 3px;
}
</style>

<div class="container k-view">
<a name="#top"></a>
<div class="panel panel-default">
	<div class="panel-heading"><span class="glyphicon glyphicon-minus kBtnSpan" id="idBtnToggle"></span>{{.document.Name}} - {{.chapter.Name}}</div>
	<div class="panel-body">
		<div id="idBodyHide" style="display: none;">{{msg .  "data is hide"}}</div>
		<div id="idBodyView">
			<ul id="idListPanel" class="list-group">
			</ul>

			<div>
				<span class="glyphicon glyphicon-plus kBtnSpan" id="idBtnNewPanel"></span>
			</div>
		</div>
	</div>
</div>

<div id="idPanelsView"></div>

</div>


<!--	modal sort	-->
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#idModalSort" id="idBtnSort" style="display: none;">Open Modal</button>

<div id="idModalSort" class="modal fade" role="dialog">
<div class="modal-dialog">

<!-- Modal content-->
<div class="modal-content">
	<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal">&times;</button>
	<h4 class="modal-title">{{msg . "chapter.edit.modal sort"}}</h4>
	</div>

	<div class="modal-body">
		<ul class='list-group' id="idModalSortBody">
		</ul>
	</div>

	<div class="modal-footer">
	<button type="button" class="btn btn-default" id="idModalSortSure">{{msg . "Sure"}}</button>
	<button type="button" class="btn btn-default" data-dismiss="modal" id="idModalSortCancel">{{msg . "Cancel"}}</button>
	</div>
</div>

</div>
</div>


<!--	modal input	-->
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#idModalInput" id="idBtnModalInput" style="display: none;">Open Modal</button>

<div id="idModalInput" class="modal fade" role="dialog">
<div class="modal-dialog">

<!-- Modal content-->
<div class="modal-content">
	<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal">&times;</button>
	<h4 class="modal-title" id="idModalInputTitle">title</h4>
	</div>

	<div class="modal-body">
	<p><input type="text" id="idModalInputBody" style="width: 100%;"></p>
	</div>

	<div class="modal-footer">
	<button type="button" class="btn btn-default" id="idModalInputSure">{{msg . "Sure"}}</button>
	<button type="button" class="btn btn-default" data-dismiss="modal" id="idModalInputCancel">{{msg . "Cancel"}}</button>
	</div>
</div>

</div>
</div>


<!--	modal input textarea	-->
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#idModalTextarea" id="idBtnModalTextarea" style="display: none;">Open Modal</button>

<div id="idModalTextarea" class="modal fade" role="dialog">
<div class="modal-dialog">

<!-- Modal content-->
<div class="modal-content">
	<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal">&times;</button>
	<h4 class="modal-title" id="idModalTextareaTitle">title</h4>
	</div>

	<div class="modal-body">
	<p>
		<textarea id="idModalTextareaBody" style="width: 100%;" rows="8"></textarea>
	</div>

	<div class="modal-footer">
	<button type="button" class="btn btn-default" id="idModalTextareaSure">{{msg . "Sure"}}</button>
	<button type="button" class="btn btn-default" data-dismiss="modal" id="idModalTextareaCancel">{{msg . "Cancel"}}</button>
	</div>
</div>

</div>
</div>

<!--	modal input html	-->
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#idModalHtml" id="idBtnModalHtml" style="display: none;">Open Modal</button>

<div id="idModalHtml" class="modal fade" role="dialog">
<div class="modal-dialog">

<!-- Modal content-->
<div class="modal-content">
	<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal">&times;</button>
	<h4 class="modal-title">{{msg . "chapter.edit.escape html"}}</h4>
	</div>

	<div class="modal-body">
		<textarea id="idModalHtmlBody" style="width: 100%;" rows="8"></textarea>

		<textarea id="idModalHtmlVal" readonly="readonly" style="width: 100%;" rows="8"></textarea>
	</div>

	<div class="modal-footer">
	<button type="button" class="btn btn-default" id="idModalHtmlBtnCode">{{msg . "Code"}}</button>
	<button type="button" class="btn btn-default" id="idModalHtmlBtnOk">{{msg . "Sure"}}</button>
	</div>
</div>

</div>
</div>


<!--	modal msg	-->
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#idModalMsg" id="idBtnModalMsg" style="display: none;">Open Modal</button>

<div id="idModalMsg" class="modal fade" role="dialog">
<div class="modal-dialog">

<!-- Modal content-->
<div class="modal-content">
	<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal">&times;</button>
	<h4 class="modal-title" id="idModalMsgTitle">title</h4>
	</div>

	<div class="modal-body">
	<p id="idModalMsgBody">body</p>
	</div>

	<div class="modal-footer">
	<button type="button" class="btn btn-default" id="idModalMsgSure">{{msg . "Sure"}}</button>
	<button type="button" class="btn btn-default" data-dismiss="modal" id="idModalMsgCancel">{{msg . "Cancel"}}</button>
	</div>
</div>

</div>
</div>


{{template "footer.html" .}}




<!--	kindeditor	-->
<link rel="stylesheet" href="/public/js/kindeditor/themes/default/default.css" />
<script src="/public/js/kindeditor/kindeditor-all-min.js"></script>
<script src="/public/js/kindeditor/lang/{{.currentLocale}}.js"></script>
<style type="text/css">
.ke-icon-mycode {
	background-image: url(/public/img/c_16px.ico);
	width: 16px;
	height: 16px;
}
</style>


<!--	google code prettify	-->
<link rel="stylesheet" type="text/css" href="/public/js/code-prettify/src/prettify.css">
<link rel="stylesheet" type="text/css" href="/public/js/code-prettify/styles/sons-of-obsidian.css">
<script src="/public/js/code-prettify/src/prettify.js"></script>



{{if eq .RunMode "dev"}}
	<script src="/public/views/msg.js"></script>

	<script src="/public/views/App/Edit.js"></script>
{{else}}
	<script src="/public/views/msg.min.js"></script>

	<script src="/public/views/App/Edit.min.js"></script>
{{end}}

<script type="text/javascript">
$(document).ready(function() {
KindEditor.ready(function(K) {
	var ctx = NewContext({
		K:K,
		Language:{
			"Cancel":{{msg . "Cancel"}},
			"Sure":{{msg . "Sure"}},

			"err.title":{{msg . "err.title"}},
			"warning.title":{{msg . "warning.title"}},
			"err net":{{msg . "err net"}},
			"data not need save":{{msg . "data not need save"}},
			"data save ok":{{msg . "data save ok"}},

			"new panel":{{msg . "chapter.edit.new panel"}},
			"input chapter":{{msg . "chapter.edit.input chapter name"}},

			"data is hide":{{msg . "data is hide"}},
			"wait init data":{{msg . "chapter.edit.wait init data"}},

			"new section":{{msg . "chapter.edit.new section"}},

			"section ok":{{msg . "chapter.edit.section data ok"}},
			"section no":{{msg . "chapter.edit.section data no"}},
			"input section":{{msg . "chapter.edit.input section name"}},

			"insert code":{{msg . "chapter.edit.section.insert code"}},
			"input code":{{msg . "chapter.edit.section.input code"}},

			"msg warning":{{msg . "msg warning"}},
			"sure?":{{msg . "msg are you sure"}},
			"chapter erase":{{msg . "chapter.edit.erase"}},
			"panel erase":{{msg . "chapter.edit.panel erase"}},
		},
		Panels:[
{{range .panels}}
			{
				Id:{{.Id}},
				Name:{{.Name}},
			},
{{end}}
		],
		Chapter:{
			Id:{{.chapter.Id}},
		},
	});
});
});
</script>