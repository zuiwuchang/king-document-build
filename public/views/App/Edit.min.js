var $jscomp={scope:{},findInternal:function(a,b,d){a instanceof String&&(a=String(a));for(var p=a.length,g=0;g<p;g++){var f=a[g];if(b.call(d,f,g,a))return{i:g,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,d,p){if(b){d=$jscomp.global;a=a.split(".");for(p=0;p<a.length-1;p++){var g=a[p];g in d||(d[g]={});d=d[g]}a=a[a.length-1];p=d[a];b=b(p);b!=p&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3");
var NewContext=function(a){var b=a.Language,d=function(){var b=$("#idBtnSort"),a=$("#idModalSortBody");a.sortable().disableSelection();var e=$("#idModalSortSure"),f=$("#idModalSortCancel"),c=null,h=null;e.click(function(b){f.click();if(c){var e=[],k=!1;a.children("li").each(function(b,a){var c=$(a).data("id");e.push(c);k||c==h[b].Id||(k=!0)});k&&c(e)}});return{Show:function(e,l){h=e;c=l;for(var k="",f=0;f<e.length;f++)var m=e[f],k=k+("<li class='list-group-item' data-id='"+m.Id+"'>"+m.Name+"</li>");
a.html(k);b.click()}}}(),p=function(){var b=$("#idBtnModalInput"),a=$("#idModalInputTitle"),e=$("#idModalInputBody"),f=$("#idModalInputSure"),c=$("#idModalInputCancel"),h=null,d={Show:function(c,f,m){m&&(h=m);a.html(c);e.val(f);b.click();setTimeout(function(){e.select().focus()},200)},Hide:function(){c.click()}},n=function(){if(h){var b=e.val();h(d,b)}else c.click()};f.click(function(b){n()});e.keydown(function(b){13==b.keyCode&&n()});return d}(),g=function(){var b=$("#idBtnModalTextarea"),a=$("#idModalTextareaTitle"),
e=$("#idModalTextareaBody"),f=$("#idModalTextareaSure"),c=$("#idModalTextareaCancel"),h=null,d={Show:function(c,f,l){l&&(h=l);a.html(c);e.val(f);b.click();setTimeout(function(){e.select().focus()},200)},Hide:function(){c.click()},Reset:function(){e.val("")}};f.click(function(b){h?(b=e.val(),h(d,b)):c.click()});return d}(),f=function(){var b=$("#idBtnModalMsg"),a=$("#idModalMsgTitle"),e=$("#idModalMsgBody"),f=$("#idModalMsgSure"),c=$("#idModalMsgCancel"),h=null,d={Show:function(c,f,l){l&&(h=l);a.html(c);
e.html(f);b.click()},Hide:function(){c.click()}};f.click(function(b){h?h(d):c.click()});return d}();KindEditor.plugin("mycode",function(a){var f=this;f.clickToolbar("mycode",function(){g.Show(b["input code"],"",function(b,a){b.Hide();a=$.trim(a);if(""!=a){var c=a,e=document.createElement("div"),c=document.createTextNode(c);e.appendChild(c);a="<pre class='prettyprint linenums'>"+e.innerHTML+"</pre>";f.insertHtml(a)}})})});KindEditor.lang({mycode:b["insert code"]});var E=function(a,g){var e=0,l=$("#idPanelsView"),
c=$("<div class='panel panel-default'><a name='panel-"+a+"'></a><div class='panel-heading'><span class='glyphicon glyphicon-asterisk kBtnSpan kBtnTop'></span><span class='glyphicon glyphicon-minus kBtnSpan kBtnMenuHide'></span><span class='glyphicon glyphicon-sort-by-attributes kBtnSpan kBtnMenuSort'></span><span class='kPanelName'>"+g+"</span></div><div class='panel-body'><div class='kPanelHide' style='display: none;'>"+b["data is hide"]+"</div><div class='kPanelBody'><div class='kPanelBodyView'>"+
b["wait init data"]+"</div><div class='kSectionNode'><span class='glyphicon glyphicon-plus kBtnSpan kBtnAddSection'></span></div></div></div></div>");l.append(c);var h=c.find(".kPanelName:first"),r=c.find(".kPanelHide:first"),n=c.find(".kPanelBody:first"),k=n.find(".kPanelBodyView:first"),t=c.find(".kBtnAddSection:first");t.hide();var m=[],x=function(a,c,q){m.push({Id:a,Name:c});var d=$("<div><h4 class='kSectionTitle'><span class='glyphicon glyphicon-minus kBtnSpan'></span><span class='glyphicon glyphicon-wrench kBtnSpan'></span><span class='glyphicon glyphicon-remove kBtnSpan'></span><span class='kTitleName'>"+
c+"</span></h4><div class='kSectionHide'>"+b["data is hide"]+"</div><div class='kSectionBody'><div class='kSectionViewStatus'><span class='glyphicon glyphicon-wrench kBtnSpan'></span><span class='glyphicon glyphicon-save kBtnSpan'></span><span class='kSectionSaveStatus'>"+b["section ok"]+"</span></div><div class='kSectionView'></div><div class='kSectionEdit'><textarea class='kEditor'></textarea></div></div></div>"),l=d.find(".kSectionTitle:first"),x=l.find(".kTitleName:first"),h=d.find(".kSectionHide:first"),
D=d.find(".kSectionBody:first"),v=d.find(".kSectionViewStatus:first"),g=d.find(".kSectionView:first"),z=d.find(".kSectionEdit:first");k.append(d);var n=v.find(".kSectionSaveStatus:first"),r={ShowPreview:function(b){z.hide();g.html(b);g.show();prettyPrint()},Save:function(c){if(q==c)f.Show(b["warning.title"],b["data not need save"]);else{var e=this;$.ajax({url:"/Section/AjaxSave",type:"POST",dataType:"json",data:{id:a,val:c}}).done(function(a){0==a.Code?(q=c,e.UpdateStatus()):f.Show(b["err.title"],
a.Emsg)}).fail(function(){f.Show(b["err.title"],b["err net"])})}},UpdateStatus:function(a){a?a==q?n.text(b["section ok"]):n.text(b["section no"]):n.text(b["section ok"])}},d=z.find(".kEditor");(q||""==q)&&d.val(q);var t=function(b){var a=b.edit.doc.body.scrollHeight;100>a||b.edit.setHeight(a)},y=KindEditor.create(d,{resizeType:0,width:"100%",height:100,items:"source | undo redo | mycode | cut copy paste plainpaste | justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent subscript superscript clearhtml quickformat selectall | fullscreen / formatblock fontname fontsize | forecolor hilitecolor bold italic underline strikethrough lineheight removeformat | image multiimage insertfile table emoticons link unlink".split(" "),
afterCreate:function(){r._isCreate=!0},afterChange:function(){if(r._isCreate){var b=this.html();r.UpdateStatus(b);t(this)}}});y._k_ctx=r;q||""==q?r.ShowPreview(q):q="";var u=function(d){c!=d&&1==e&&(e=2,$.ajax({url:"/Section/AjaxRename",type:"POST",dataType:"json",data:{id:a,name:d}}).done(function(a){0==a.Code?(c=d,x.text(c)):f.Show(b["err.title"],a.Emsg)}).fail(function(){f.Show(b["err.title"],b["err net"])}).always(function(){e=1}))};l.find(".glyphicon-minus:first").click(function(b){h.toggle("fast");
D.toggle("fast")});l.find(".glyphicon-wrench:first").click(function(a){p.Show(b["input section"],c,function(b,a){b.Hide();u(a)})});v.find(".glyphicon-wrench:first").click(function(b){g.is(":visible")?(g.html(""),g.hide(),z.show(),t(y)):(b=y.html(),r.ShowPreview(b))});v.find(".glyphicon-save:first").click(function(b){b=y.html();r.Save(b)})},v=function(a){m=[];$.ajax({url:"/Section/AjaxFind",type:"POST",dataType:"json",data:{panel:a}}).done(function(b){if(0==b.Code){k.html("");if(b=b.Data)for(var a=
0;a<b.length;a++){var c=b[a];x(c.Id,c.Name,c.Str)}t.show();e=1}else k.html(b.Emsg)}).fail(function(){k.html(b["err net"])})};v(a);c.find(".kBtnTop:first").click(function(b){location.href="#top"});c.find(".kBtnMenuHide:first").click(function(b){r.toggle("fast");n.toggle("fast")});c.find(".kBtnMenuSort:first").click(function(c){1==e&&0!=m.length&&d.Show(m,function(c){1==e&&(e=2,c=c.join("-"),$.ajax({url:"/Section/AjaxSort",type:"POST",dataType:"json",data:{sort:c}}).done(function(c){0==c.Code?(k.html(b["wait init data"]),
v(a)):f.Show(b["err.title"],c.Emsg)}).fail(function(){f.Show(b["err.title"],b["err net"])}).always(function(){e=1}))})});t.click(function(c){if(1==e){var d=b["new section"];e=2;$.ajax({url:"/Section/AjaxNew",type:"POST",dataType:"json",data:{panel:a,name:d}}).done(function(a){0==a.Code?x(a.Value,d):f.Show(b["err.title"],a.Emsg)}).fail(function(){f.Show(b["err.title"],b["err net"])}).always(function(){e=1})}});return{Rename:function(b){h.text(b)}}},u=function(){var d=!0,g=$("#idBtnToggle"),e=$("#idBodyHide"),
u=$("#idBodyView");g.click(function(b){e.toggle("fast");u.toggle("jqView")});var c=$("#idListPanel"),h=[],w=function(){var b={};c.children("li").each(function(a,c){var d=$(c),f=d.attr("id");b[f]=d});for(var a=0;a<h.length;a++)c.append(b[h[a]])};c.sortable({update:function(a,e){if(!d)return!1;var m=c.sortable("toArray"),g=m.join("-");d=!1;$.ajax({url:"/Panel/AjaxSort",type:"POST",dataType:"json",data:{sort:g}}).done(function(a){0==a.Code?h=m:(w(),f.Show(b["err.title"],a.Emsg))}).fail(function(){w();
f.Show(b["err.title"],b["err net"])}).always(function(){d=!0})}}).disableSelection();var n=null,k=null,t=function(a,e){h.push(a);var g=$("<li class='list-group-item' id='"+a+"'><span data-id='"+a+"' class='glyphicon glyphicon-wrench kBtnSpan'></span><span data-id='"+a+"' class='glyphicon glyphicon-remove kBtnSpan'></span><a href='#panel-"+a+"'>"+e+"</a></li>"),m=g.find("a:first");c.append(g);n&&n(a,e);var l=function(c){c!=e&&d&&(d=!1,$.ajax({url:"/Panel/AjaxRename",type:"POST",dataType:"json",data:{id:a,
name:c}}).done(function(d){0==d.Code?(e=c,m.text(e),k&&k(a,e)):f.Show(b["err.title"],d.Emsg)}).fail(function(){f.Show(b["err.title"],b["err net"])}).always(function(){d=!0}))};g.find(".glyphicon-wrench").click(function(a){p.Show(b["input chapter"],e,function(a,b){a.Hide();l(b)})});g.find(".glyphicon-remove").click(function(b){alert(a+" remove")})};$("#idBtnNewPanel").click(function(c){if(d){d=!1;var e=b["new panel"];$.ajax({url:"/Panel/AjaxNew",type:"POST",dataType:"json",data:{chapter:a.Chapter.Id,
name:e}}).done(function(a){0==a.Code?t(a.Value,e):f.Show(b["err.title"],a.Emsg)}).fail(function(){f.Show(b["err.title"],b["err net"])}).always(function(){d=!0})}});return{Bind:function(a,b){"item.new"==a?n=b:"item.rename"==a&&(k=b)},New:function(a,b){t(a,b)}}}(),A={};u.Bind("item.new",function(a,b){A[a]=E(a,b)});u.Bind("item.rename",function(a,b){A[a].Rename(b)});for(var B=a.Panels,w=0;w<B.length;w++){var C=B[w];u.New(C.Id,C.Name)}};
