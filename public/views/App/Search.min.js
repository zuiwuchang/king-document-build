var $jscomp={scope:{},findInternal:function(a,e,c){a instanceof String&&(a=String(a));for(var d=a.length,b=0;b<d;b++){var f=a[b];if(e.call(c,f,b,a))return{i:b,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,c,d){if(e){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var b=a[d];b in c||(c[b]={});c=c[b]}a=a[a.length-1];d=c[a];e=e(d);e!=d&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
var NewContext=function(a){var e=a.Language,c=!0,d=function(){var a=$("#idBtnModalMsg"),c=$("#idModalMsgTitle"),e=$("#idModalMsgBody"),d=$("#idModalMsgSure"),b=$("#idModalMsgCancel"),f=null,g={Show:function(h,d,b){b&&(f=b);c.html(h);e.html(d);a.click()},Hide:function(){b.click()}};d.click(function(a){f?f(g):b.click()});return g}(),b=function(){var c=null;$("#idTagTree").hide().jstree({plugins:["conditionalselect","contextmenu","sort"],conditionalselect:function(){this.deselect_all(!0);return!0},contextmenu:{items:function(a){var b=
this,d={search:{label:e["search tag"],icon:"/public/img/book_16px.ico",action:function(){c&&c(b,a)}}};b.is_leaf(a)||(d.toggle={label:e["toggle tag"],icon:"/public/img/attachment_16px.ico",separator_before:!0,action:function(){b.toggle_node(a)}});return d}},sort:function(a,c){var b=this.get_node(a),e=this.get_node(c);return b.data.Sort>e.data.Sort?1:-1},core:{check_callback:!0,data:a.Data}}).on("ready.jstree",function(){$(this).show()});return{Bind:function(a,b){"search"==a&&(c=b)}}}(),f=$("#idDocsView"),
k=function(){return{Update:function(a){if(a){for(var c=[],b=0;b<a.length;b++){var d=a[b];c.push("<p><span class='glyphicon glyphicon-wrench kBtnEdit' data-id='"+d.Id+"'></span><a target='_blank' href='/Document/Index?id="+d.Id+"'>"+d.Name+"</a></p>")}a=$(c.join(""));a.find(".kBtnEdit").click(function(a){a="/Document/Edit?id="+$(this).data("id");window.open(a)});f.html(a)}else f.html(e["none data"])}}}();b.Bind("search",function(a,b){c&&(c=!1,a.set_icon(b,"/public/img/throbber.gif"),$.ajax({url:"/Tag/AjaxGetDocs",
type:"POST",dataType:"json",data:{tag:b.id}}).done(function(a){0==a.Code?k.Update(a.Data):d.Show(e["error title"],a.Emsg)}).fail(function(){d.Show(e["error title"],e["err net"])}).always(function(){c=!0;a.set_icon(b)}))});var l=$("#idDocsHide");$("#kBtnIcon").click(function(a){f.toggle("fast");l.toggle("fast")})};
